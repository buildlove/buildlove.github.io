<!DOCTYPE html>
<html>
  <!-- Html Head Tag-->
  <head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="description" content="用于个人笔记">
  <meta name="author" content="Screenshot 2015">
  <!-- Open Graph Data -->
  <meta property="og:title" content="简单的python连接mysql"/>
  <meta property="og:description" content="用于个人笔记" />
  <meta property="og:site_name" content="liyang&#39;s blog"/>
  <meta property="og:type" content="article" />
  <meta property="og:image" content="http://buildlove.github.ioundefined"/>
  
    <link rel="alternate" href="/atom.xml" title="liyang&#39;s blog" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  

  <!-- Site Title -->
  <title>liyang's blog</title>

  <!-- Bootstrap CSS -->
  <link rel="stylesheet" href="/css/bootstrap.min.css">
  <!-- Custom CSS -->
  
  <link rel="stylesheet" href="/css/style.light.css">

  <!-- Google Analytics -->
  

</head>

  <body>
    <!-- Page Header -->


<header class="site-header header-background" style="background-image: url(/img/default-banner-dark.jpg)">
  <div class="container">
    <div class="row">
      <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
        <div class="page-title with-background-image">
          <p class="title">简单的python连接mysql</p>
          <p class="subtitle"></p>
        </div>
        <div class="site-menu with-background-image">
          <ul>
            
              <li>
                <a href="/">
                  
                  Home
                  
                </a>
              </li>
            
              <li>
                <a href="/archives">
                  
                  Archives
                  
                </a>
              </li>
            
              <li>
                <a href="https://github.com/buildlove">
                  
                  Github
                  
                </a>
              </li>
            
              <li>
                <a href="mailto:mkdir_yang@163.com">
                  
                  Email
                  
                </a>
              </li>
            
              <li>
                <a href="https://www.jianshu.com/u/c4bc363ac296">
                  
                  简书
                  
                </a>
              </li>
            
          </ul>
        </div>
      </div>
    </div>
  </div>
</header>

<article>
  <div class="container typo">
    <div class="row">
      <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
        <div class="post-info text-muted">
          
            <!-- Author -->
            <span class="author info">By Screenshot 2015</span>
          
          <!-- Date -->
          <span class="date-time info">On
            <span class="date">2016-03-08</span>
            <span class="time">16:26:13</span>
          </span>
          
        </div>
        <!-- Tags -->
        
          <div class="post-tags text-muted">
            Tags: 

<a class="tag" href="/tags/python/">#python</a> <a class="tag" href="/tags/mysql/">#mysql</a>


          </div>
        
        <!-- Post Main Content -->
        <div class="post-content">
          <p>python 基础学习<br><a id="more"></a></p>
<p>环境 win7 python3.4</p>
<h2 id="安装virtualenv"><a href="#安装virtualenv" class="headerlink" title="安装virtualenv"></a>安装virtualenv</h2><p>pip install virtualenv<br>创建一个目录，命令行进入目录<br>virtualenv –no-site-packages venv<br>进入venv虚拟环境<br>找到../venv/Scripts/activate这个文件<br>直接拖放到命令行小黑框内回车或者绝对路径复制粘贴到命令行回车<br>(venv) C:\Users\liyang\Desktop\github1\python\myproject&gt;<br>命令行前出现venv的就说明进入另一个独立的python环境</p>
<h2 id="安装mysql"><a href="#安装mysql" class="headerlink" title="安装mysql"></a>安装mysql</h2><p>windows系统下需要安装PyMySQL连接数据库<br>pip install PyMySQL<br>安装之后在”\myproject\venv\Lib\site-packages\pymysql__init__.py”文件夹写入<br>import pymysql<br>在myproject文件夹下创建一个item.py文件，写入：</p>
<p>import pymysql<br>conn = pymysql.connect(host=’127.0.0.1’, port=3306, user=’root’, passwd=’123456’, db=’mysql’)<br>cursor = conn.cursor()</p>
<p>#创建user表<br>cursor.execute(‘create table aaa (id varchar(20) primary key, name varchar(20))’)</p>
<p>#插入一行记录， 注意MYSQL的占位符是%s<br>cursor.execute(‘insert into aaa (id, name) values (%s, %s)’, [‘3’, ‘uncle’])</p>
<p>#提交<br>conn.commit()<br>cursor.execute(‘select * from aaa where id = %s’, [‘3’])<br>values = cursor.fetchall()<br>print(values)</p>
<p>#删除表<br>cursor.execute(“DROP TABLE IF EXISTS aaa”)</p>
<p>#关闭Cursor和connection<br>cursor.close()<br>conn.close()</p>
<p>python item.py<br>//((‘3’, ‘uncle’),)<br>不报错说明已经成功了</p>
<h2 id="普通连接数据库的方法"><a href="#普通连接数据库的方法" class="headerlink" title="普通连接数据库的方法"></a>普通连接数据库的方法</h2><h3 id="启动数据库mysqld-exe-–console"><a href="#启动数据库mysqld-exe-–console" class="headerlink" title="启动数据库mysqld.exe –console"></a>启动数据库mysqld.exe –console</h3><p>打开另一个cmd窗口mysql -u root -p输入账号密码</p>
<h3 id="创建数据库test"><a href="#创建数据库test" class="headerlink" title="创建数据库test"></a>创建数据库test</h3><p>创建表tbTest<br>create database test;<br>use test;<br>create table tbTest<br>(<br>  first_name varchar(255),<br>  last_name varchar(255),<br>  age int,<br>  sex varchar(255),<br>  income varchar(255)<br>);<br>查看内容<br>show databases;<br>show columns from tbTest;</p>
<h2 id="普通连接数据库实现增删改查"><a href="#普通连接数据库实现增删改查" class="headerlink" title="普通连接数据库实现增删改查"></a>普通连接数据库实现增删改查</h2><p>!/usr/bin/python<br> -<em>- coding: UTF-8 -</em>-</p>
<h3 id="引用数据库模块"><a href="#引用数据库模块" class="headerlink" title="引用数据库模块"></a>引用数据库模块</h3><p>import MySQLdb</p>
<h3 id="打开数据库连接-账号-密码-数据库名称"><a href="#打开数据库连接-账号-密码-数据库名称" class="headerlink" title="打开数据库连接                  账号   密码    数据库名称"></a>打开数据库连接                  账号   密码    数据库名称</h3><p>db = MySQLdb.connect(“localhost”,”root”,”123456”,”test” )</p>
<h3 id="使用cursor-方法获取操作游标"><a href="#使用cursor-方法获取操作游标" class="headerlink" title="使用cursor()方法获取操作游标"></a>使用cursor()方法获取操作游标</h3><p>cursor = db.cursor()</p>
<h3 id="删（删除已经创建好的表tbTest）"><a href="#删（删除已经创建好的表tbTest）" class="headerlink" title="删（删除已经创建好的表tbTest）"></a>删（删除已经创建好的表tbTest）</h3><p>cursor.execute(“DROP TABLE IF EXISTS tbTest”)</p>
<h3 id="增-创建数据表SQL语句"><a href="#增-创建数据表SQL语句" class="headerlink" title="增(创建数据表SQL语句)"></a>增(创建数据表SQL语句)</h3><p>sql = “””CREATE TABLE tbTest (<br>         FIRST_NAME  CHAR(20) NOT NULL,<br>         LAST_NAME  CHAR(20),<br>         AGE INT,<br>         SEX CHAR(1),<br>         INCOME FLOAT )”””<br>cursor.execute(sql)</p>
<h3 id="改（在表中插入数据）"><a href="#改（在表中插入数据）" class="headerlink" title="改（在表中插入数据）"></a>改（在表中插入数据）</h3><p>sql = “””INSERT INTO tbTest(FIRST_NAME,<br>         LAST_NAME, AGE, SEX, INCOME)<br>         VALUES (‘Mac’, ‘Mohan’, 20, ‘M’, 2000)”””<br>try:<br>  cursor.execute(sql)<br>  db.commit()<br>except:<br>  db.rollback()</p>
<h3 id="查-获取一条数据库打印。"><a href="#查-获取一条数据库打印。" class="headerlink" title="查 获取一条数据库打印。"></a>查 获取一条数据库打印。</h3><p>data = cursor.fetchone()<br>print “Database version : %s “ % data</p>

        </div>
      </div>
    </div>
  </div>
</article>



    <!-- Footer -->
<footer>
  <div class="container">
    <div class="row">
      <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
        <p class="copyright text-muted">
          Sharing and growing is important
        <p class="copyright text-muted">
          thanks for <a target="_blank" href="https://github.com/buildlove">myself</a>
        </p>
      </div>
    </div>
  </div>
</footer>


    <!-- After Footer Scripts -->
<script src="/js/highlight.pack.js"></script>
<script>
  document.addEventListener("DOMContentLoaded", function(event) {
    var codeBlocks = Array.prototype.slice.call(document.getElementsByTagName('pre'))
    codeBlocks.forEach(function(block, index) {
      hljs.highlightBlock(block);
    });
  });
</script>

  </body>
</html>

